[2016-08-01 20:50:22] <warning>  Traceback (most recent call last):
  File "/home/docker/docker/demo/bin/topo_operate.py", line 49, in TopoCreate
    self.KvmCreate.caseins=caseins
AttributeError: 'TopoOperate' object has no attribute 'KvmCreate'

[2016-08-01 20:51:16] <warning>  Traceback (most recent call last):
  File "/home/docker/docker/demo/bin/topo_operate.py", line 49, in TopoCreate
    self.KvmCreate.caseins=caseins
AttributeError: 'TopoOperate' object has no attribute 'KvmCreate'

[2016-08-01 20:51:31] <warning>  Traceback (most recent call last):
  File "/home/docker/docker/demo/bin/topo_operate.py", line 49, in TopoCreate
    self.KvmCreate.caseins=caseins
AttributeError: 'TopoOperate' object has no attribute 'KvmCreate'

[2016-08-01 20:54:54] <warning>  Traceback (most recent call last):
  File "/home/docker/docker/demo/bin/topo_operate.py", line 49, in TopoCreate
    self.KvmCreate.caseins=caseins
AttributeError: 'TopoOperate' object has no attribute 'KvmCreate'

[2016-08-01 20:55:47] <warning>  Traceback (most recent call last):
  File "/home/docker/docker/demo/bin/topo_operate.py", line 50, in TopoCreate
    self.NetConfig.caseins=caseins
AttributeError: 'TopoOperate' object has no attribute 'NetConfig'

[2016-08-01 20:56:17] <info>  数据初始化完成!
[2016-08-01 20:56:17] <info>  网桥创建完成!
[2016-08-01 20:56:17] <info>  docker创建完成!
[2016-08-01 20:56:17] <info>  kvm创建完成!
[2016-08-01 20:56:17] <info>  网络配置完成!
[2016-08-01 20:56:18] <info>  数据库存储完成!
[2016-08-01 20:56:18] <info>  拓扑创建成功!
[2016-08-01 20:56:20] <info>  数据初始化完成!
[2016-08-01 20:56:20] <info>  网桥创建完成!
[2016-08-01 20:56:20] <info>  docker创建完成!
[2016-08-01 20:56:20] <info>  kvm创建完成!
[2016-08-01 20:56:20] <info>  网络配置完成!
[2016-08-01 20:56:20] <info>  数据库存储完成!
[2016-08-01 20:56:20] <info>  拓扑创建成功!
[2016-08-01 20:56:21] <info>  数据初始化完成!
[2016-08-01 20:56:21] <info>  网桥创建完成!
[2016-08-01 20:56:21] <info>  docker创建完成!
[2016-08-01 20:56:22] <info>  kvm创建完成!
[2016-08-01 20:56:22] <info>  网络配置完成!
[2016-08-01 20:56:22] <info>  数据库存储完成!
[2016-08-01 20:56:22] <info>  拓扑创建成功!
[2016-08-01 21:23:34] <info>  数据初始化完成!
[2016-08-01 21:23:34] <error>  Traceback (most recent call last):
  File "/home/docker/docker/demo/bin/topo_operate.py", line 65, in TopoCreate
    network_topo["network_core_list"])
  File "/home/docker/docker/demo/bin/bridge_operate.py", line 43, in OvsCreate
    self.BridgeCreate(bridge_name)
  File "/home/docker/docker/demo/bin/bridge_operate.py", line 59, in BridgeCreate
    self.logger.log_save(cmd,caseins,"info")
AttributeError: BridgeOperate instance has no attribute 'logger'

[2016-08-01 21:37:38] <info>  数据初始化完成!
[2016-08-01 21:37:38] <error>  Traceback (most recent call last):
  File "/home/docker/docker/demo/bin/topo_operate.py", line 65, in TopoCreate
    network_topo["network_core_list"])
  File "/home/docker/docker/demo/bin/bridge_operate.py", line 45, in OvsCreate
    self.BridgeCreate(bridge_name)
  File "/home/docker/docker/demo/bin/bridge_operate.py", line 61, in BridgeCreate
    self.logger.log_save(cmd,caseins,"info")
NameError: global name 'caseins' is not defined

[2016-08-01 21:38:10] <info>  数据初始化完成!
[2016-08-01 21:38:10] <error>  Traceback (most recent call last):
  File "/home/docker/docker/demo/bin/topo_operate.py", line 65, in TopoCreate
    network_topo["network_core_list"])
  File "/home/docker/docker/demo/bin/bridge_operate.py", line 45, in OvsCreate
    self.BridgeCreate(bridge_name)
  File "/home/docker/docker/demo/bin/bridge_operate.py", line 61, in BridgeCreate
    self.logger.log_save(cmd,caseins,"info")
NameError: global name 'caseins' is not defined

[2016-08-01 21:39:05] <info>  数据初始化完成!
[2016-08-01 21:39:05] <info>  sudo ovs-vsctl add-br br_router_0_3
[2016-08-01 21:39:05] <info>  sudo ovs-vsctl add-br br_router_2_0
[2016-08-01 21:39:05] <info>  sudo ovs-vsctl add-br br_router_1_0
[2016-08-01 21:39:05] <info>  sudo ovs-vsctl add-br br_08630628
[2016-08-01 21:39:05] <info>  sudo ovs-vsctl add-br br_b53d792c
[2016-08-01 21:39:05] <info>  sudo ovs-vsctl add-br br_cf1f51ff
[2016-08-01 21:39:05] <info>  sudo ovs-vsctl add-br br_47e364fd
[2016-08-01 21:39:05] <info>  网桥创建完成!
[2016-08-01 21:39:05] <info>  sudo  docker-compose -f /home/docker/docker/demo/user/bf33578c/docker-compose.yaml  scale  08630628_0=1   b53d792c_0=1   47e364fd_0=1   router=4   
[2016-08-01 21:39:05] <info>  docker创建完成!
[2016-08-01 21:39:05] <info>  virsh dumpxml winxp > /home/docker/docker/demo/user/bf33578c/bf33578c_cf1f51ff_2_1.xml
[2016-08-01 21:39:05] <info>  cp /var/lib/libvirt/images/winxp.qcow2 /var/lib/libvirt/images/bf33578c_cf1f51ff_2_1
[2016-08-01 21:39:05] <info>  virsh define /home/docker/docker/demo/user/bf33578c/bf33578c_cf1f51ff_2_1.xml
[2016-08-01 21:39:05] <info>  virsh dumpxml winxp > /home/docker/docker/demo/user/bf33578c/bf33578c_cf1f51ff_2_2.xml
[2016-08-01 21:39:05] <info>  cp /var/lib/libvirt/images/winxp.qcow2 /var/lib/libvirt/images/bf33578c_cf1f51ff_2_2
[2016-08-01 21:39:05] <info>  virsh define /home/docker/docker/demo/user/bf33578c/bf33578c_cf1f51ff_2_2.xml
[2016-08-01 21:39:05] <info>  kvm创建完成!
[2016-08-01 21:39:05] <info>  sudo ovs-docker add-port br_08630628 eth0 bf33578c_router_1
[2016-08-01 21:39:05] <info>  sudo docker exec bf33578c_router_1 ifconfig eth0 10.0.0.1/24
[2016-08-01 21:39:05] <info>  sudo ovs-docker add-port br_08630628 eth0 bf33578c_08630628_0_1
[2016-08-01 21:39:05] <info>  sudo docker exec bf33578c_08630628_0_1 ifconfig eth0 10.0.0.2/24
[2016-08-01 21:39:05] <info>  sudo docker exec bf33578c_08630628_0_1 route add default gw 10.0.0.1
[2016-08-01 21:39:05] <info>  sudo ovs-docker add-port br_b53d792c eth0 bf33578c_router_2
[2016-08-01 21:39:05] <info>  sudo docker exec bf33578c_router_2 ifconfig eth0 10.0.1.1/24
[2016-08-01 21:39:05] <info>  sudo ovs-docker add-port br_b53d792c eth0 bf33578c_b53d792c_0_1
[2016-08-01 21:39:05] <info>  sudo docker exec bf33578c_b53d792c_0_1 ifconfig eth0 10.0.1.2/24
[2016-08-01 21:39:05] <info>  sudo docker exec bf33578c_b53d792c_0_1 route add default gw 10.0.1.1
[2016-08-01 21:39:05] <info>  sudo ovs-docker add-port br_cf1f51ff eth0 bf33578c_router_3
[2016-08-01 21:39:05] <info>  sudo docker exec bf33578c_router_3 ifconfig eth0 10.0.2.1/24
[2016-08-01 21:39:05] <error>  Traceback (most recent call last):
  File "/home/docker/docker/demo/bin/topo_operate.py", line 86, in TopoCreate
    config,user_info["user_id"])
  File "/home/docker/docker/demo/bin/net_operate.py", line 371, in NetConfig
    network_core_list,host_data_list,router_data_list=self.HostIpDistribution(link_list,network_core_list,conf,user_id)
  File "/home/docker/docker/demo/bin/net_operate.py", line 179, in HostIpDistribution
    host_ip,kvm_list=self.KvmNetConfig(host_dict,docker_id_pre,host_ip,host_dict["host_num"],gateway_ip,kvm_conf_file_path)
  File "/home/docker/docker/demo/bin/net_operate.py", line 198, in KvmNetConfig
    self.logger.log_save(cmd1,self.caseins,"info")
UnboundLocalError: local variable 'cmd1' referenced before assignment

[2016-08-01 21:42:26] <info>  数据初始化完成!
[2016-08-01 21:42:26] <info>  sudo ovs-vsctl add-br br_router_0_3
[2016-08-01 21:42:26] <info>  sudo ovs-vsctl add-br br_router_2_0
[2016-08-01 21:42:26] <info>  sudo ovs-vsctl add-br br_router_1_0
[2016-08-01 21:42:26] <info>  sudo ovs-vsctl add-br br_08630628
[2016-08-01 21:42:26] <info>  sudo ovs-vsctl add-br br_b53d792c
[2016-08-01 21:42:26] <info>  sudo ovs-vsctl add-br br_cf1f51ff
[2016-08-01 21:42:26] <info>  sudo ovs-vsctl add-br br_47e364fd
[2016-08-01 21:42:26] <info>  网桥创建完成!
[2016-08-01 21:42:26] <info>  sudo  docker-compose -f /home/docker/docker/demo/user/bf33578c/docker-compose.yaml  scale  08630628_0=1   b53d792c_0=1   47e364fd_0=1   router=4   
[2016-08-01 21:42:26] <info>  docker创建完成!
[2016-08-01 21:42:26] <info>  virsh dumpxml winxp > /home/docker/docker/demo/user/bf33578c/bf33578c_cf1f51ff_2_1.xml
[2016-08-01 21:42:26] <info>  cp /var/lib/libvirt/images/winxp.qcow2 /var/lib/libvirt/images/bf33578c_cf1f51ff_2_1
[2016-08-01 21:42:26] <info>  virsh define /home/docker/docker/demo/user/bf33578c/bf33578c_cf1f51ff_2_1.xml
[2016-08-01 21:42:26] <info>  virsh dumpxml winxp > /home/docker/docker/demo/user/bf33578c/bf33578c_cf1f51ff_2_2.xml
[2016-08-01 21:42:26] <info>  cp /var/lib/libvirt/images/winxp.qcow2 /var/lib/libvirt/images/bf33578c_cf1f51ff_2_2
[2016-08-01 21:42:26] <info>  virsh define /home/docker/docker/demo/user/bf33578c/bf33578c_cf1f51ff_2_2.xml
[2016-08-01 21:42:26] <info>  kvm创建完成!
[2016-08-01 21:42:26] <info>  sudo ovs-docker add-port br_08630628 eth0 bf33578c_router_1
[2016-08-01 21:42:26] <info>  sudo docker exec bf33578c_router_1 ifconfig eth0 10.0.0.1/24
[2016-08-01 21:42:26] <info>  sudo ovs-docker add-port br_08630628 eth0 bf33578c_08630628_0_1
[2016-08-01 21:42:26] <info>  sudo docker exec bf33578c_08630628_0_1 ifconfig eth0 10.0.0.2/24
[2016-08-01 21:42:26] <info>  sudo docker exec bf33578c_08630628_0_1 route add default gw 10.0.0.1
[2016-08-01 21:42:26] <info>  sudo ovs-docker add-port br_b53d792c eth0 bf33578c_router_2
[2016-08-01 21:42:26] <info>  sudo docker exec bf33578c_router_2 ifconfig eth0 10.0.1.1/24
[2016-08-01 21:42:26] <info>  sudo ovs-docker add-port br_b53d792c eth0 bf33578c_b53d792c_0_1
[2016-08-01 21:42:26] <info>  sudo docker exec bf33578c_b53d792c_0_1 ifconfig eth0 10.0.1.2/24
[2016-08-01 21:42:26] <info>  sudo docker exec bf33578c_b53d792c_0_1 route add default gw 10.0.1.1
[2016-08-01 21:42:26] <info>  sudo ovs-docker add-port br_cf1f51ff eth0 bf33578c_router_3
[2016-08-01 21:42:26] <info>  sudo docker exec bf33578c_router_3 ifconfig eth0 10.0.2.1/24
[2016-08-01 21:42:26] <info>  sudo virt-copy-in -d bf33578c_cf1f51ff_0_1 /home/docker/docker/demo/user/bf33578c/setip.bat /
[2016-08-01 21:42:26] <info>  virsh start bf33578c_cf1f51ff_0_1
[2016-08-01 21:42:26] <info>  sudo virt-copy-in -d bf33578c_cf1f51ff_0_2 /home/docker/docker/demo/user/bf33578c/setip.bat /
[2016-08-01 21:42:26] <info>  virsh start bf33578c_cf1f51ff_0_2
[2016-08-01 21:42:26] <info>  sudo ovs-docker add-port br_47e364fd eth0 bf33578c_router_4
[2016-08-01 21:42:26] <info>  sudo docker exec bf33578c_router_4 ifconfig eth0 10.0.3.1/24
[2016-08-01 21:42:26] <info>  sudo ovs-docker add-port br_47e364fd eth0 bf33578c_47e364fd_0_1
[2016-08-01 21:42:26] <info>  sudo docker exec bf33578c_47e364fd_0_1 ifconfig eth0 10.0.3.2/24
[2016-08-01 21:42:26] <info>  sudo docker exec bf33578c_47e364fd_0_1 route add default gw 10.0.3.1
[2016-08-01 21:42:26] <info>  sudo ovs-docker add-port br_router_0_3 br_0_3 bf33578c_router_1
[2016-08-01 21:42:26] <info>  sudo docker exec bf33578c_router_1 ifconfig br_0_3 20.0.0.1/30
[2016-08-01 21:42:26] <info>  sudo ovs-docker add-port br_router_0_3 br_0_3 bf33578c_router_4
[2016-08-01 21:42:26] <info>  sudo docker exec bf33578c_router_4 ifconfig br_0_3 20.0.0.2/30
[2016-08-01 21:42:26] <info>  sudo ovs-docker add-port br_router_2_0 br_2_0 bf33578c_router_3
[2016-08-01 21:42:26] <info>  sudo docker exec bf33578c_router_3 ifconfig br_2_0 20.0.0.5/30
[2016-08-01 21:42:26] <info>  sudo ovs-docker add-port br_router_2_0 br_2_0 bf33578c_router_1
[2016-08-01 21:42:26] <info>  sudo docker exec bf33578c_router_1 ifconfig br_2_0 20.0.0.6/30
[2016-08-01 21:42:26] <info>  sudo ovs-docker add-port br_router_1_0 br_1_0 bf33578c_router_2
[2016-08-01 21:42:26] <info>  sudo docker exec bf33578c_router_2 ifconfig br_1_0 20.0.0.9/30
[2016-08-01 21:42:26] <info>  sudo ovs-docker add-port br_router_1_0 br_1_0 bf33578c_router_1
[2016-08-01 21:42:26] <info>  sudo docker exec bf33578c_router_1 ifconfig br_1_0 20.0.0.10/30
[2016-08-01 21:42:26] <info>  sudo docker exec bf33578c_router_1 route add -net 10.0.1.0 netmask 255.255.255.0 gw 20.0.0.9
[2016-08-01 21:42:26] <info>  sudo docker exec bf33578c_router_1 route add -net 10.0.2.0 netmask 255.255.255.0 gw 20.0.0.5
[2016-08-01 21:42:26] <info>  sudo docker exec bf33578c_router_1 route add -net 10.0.3.0 netmask 255.255.255.0 gw 20.0.0.2
[2016-08-01 21:42:26] <info>  sudo docker exec bf33578c_router_2 route add -net 10.0.0.0 netmask 255.255.255.0 gw 20.0.0.10
[2016-08-01 21:42:26] <info>  sudo docker exec bf33578c_router_2 route add -net 10.0.2.0 netmask 255.255.255.0 gw 20.0.0.10
[2016-08-01 21:42:26] <info>  sudo docker exec bf33578c_router_2 route add -net 10.0.3.0 netmask 255.255.255.0 gw 20.0.0.10
[2016-08-01 21:42:26] <info>  sudo docker exec bf33578c_router_3 route add -net 10.0.0.0 netmask 255.255.255.0 gw 20.0.0.6
[2016-08-01 21:42:26] <info>  sudo docker exec bf33578c_router_3 route add -net 10.0.1.0 netmask 255.255.255.0 gw 20.0.0.6
[2016-08-01 21:42:26] <info>  sudo docker exec bf33578c_router_3 route add -net 10.0.3.0 netmask 255.255.255.0 gw 20.0.0.6
[2016-08-01 21:42:26] <info>  sudo docker exec bf33578c_router_4 route add -net 10.0.0.0 netmask 255.255.255.0 gw 20.0.0.1
[2016-08-01 21:42:26] <info>  sudo docker exec bf33578c_router_4 route add -net 10.0.1.0 netmask 255.255.255.0 gw 20.0.0.1
[2016-08-01 21:42:26] <info>  sudo docker exec bf33578c_router_4 route add -net 10.0.2.0 netmask 255.255.255.0 gw 20.0.0.1
[2016-08-01 21:42:26] <info>  网络配置完成!
[2016-08-01 21:42:26] <info>  数据库存储完成!
[2016-08-01 21:42:26] <info>  拓扑创建成功!
[2016-08-01 21:42:58] <info>  virsh destroy bf33578c_cf1f51ff_0_1
[2016-08-01 21:42:58] <info>  virsh undefine bf33578c_cf1f51ff_0_1
[2016-08-01 21:42:58] <info>  rm -f /var/lib/libvirt/images/bf33578c_cf1f51ff_0_1
[2016-08-01 21:42:58] <info>  virsh destroy bf33578c_cf1f51ff_0_2
[2016-08-01 21:42:58] <info>  virsh undefine bf33578c_cf1f51ff_0_2
[2016-08-01 21:42:58] <info>  rm -f /var/lib/libvirt/images/bf33578c_cf1f51ff_0_2
[2016-08-01 21:42:58] <info>  删除kvm完成!
[2016-08-01 21:42:58] <info>  sudo  docker-compose -f /home/docker/docker/demo/user/bf33578c/docker-compose.yaml  stop
[2016-08-01 21:42:58] <info>  sudo  docker-compose -f /home/docker/docker/demo/user/bf33578c/docker-compose.yaml  rm  -f
[2016-08-01 21:42:58] <info>  删除docker完成!
[2016-08-01 21:42:58] <info>  sudo ovs-vsctl del-br br_router_0_3
[2016-08-01 21:42:58] <info>  sudo ovs-vsctl del-br br_router_2_0
[2016-08-01 21:42:58] <info>  sudo ovs-vsctl del-br br_router_1_0
[2016-08-01 21:42:58] <info>  sudo ovs-vsctl del-br br_08630628
[2016-08-01 21:42:58] <info>  sudo ovs-vsctl del-br br_b53d792c
[2016-08-01 21:42:58] <info>  sudo ovs-vsctl del-br br_cf1f51ff
[2016-08-01 21:42:58] <info>  sudo ovs-vsctl del-br br_47e364fd
[2016-08-01 21:42:58] <info>  删除ovs网桥完成!
[2016-08-01 21:46:33] <info>  virsh destroy bf33578c_cf1f51ff_0_1
[2016-08-01 21:46:33] <info>  virsh undefine bf33578c_cf1f51ff_0_1
[2016-08-01 21:46:33] <info>  rm -f /var/lib/libvirt/images/bf33578c_cf1f51ff_0_1
[2016-08-01 21:46:33] <info>  virsh destroy bf33578c_cf1f51ff_0_2
[2016-08-01 21:46:33] <info>  virsh undefine bf33578c_cf1f51ff_0_2
[2016-08-01 21:46:33] <info>  rm -f /var/lib/libvirt/images/bf33578c_cf1f51ff_0_2
[2016-08-01 21:46:33] <info>  删除kvm完成!
[2016-08-01 21:46:33] <info>  sudo  docker-compose -f /home/docker/docker/demo/user/bf33578c/docker-compose.yaml  stop
[2016-08-01 21:46:33] <info>  sudo  docker-compose -f /home/docker/docker/demo/user/bf33578c/docker-compose.yaml  rm  -f
[2016-08-01 21:46:33] <info>  删除docker完成!
[2016-08-01 21:46:33] <info>  sudo ovs-vsctl del-br br_router_0_3
[2016-08-01 21:46:33] <info>  sudo ovs-vsctl del-br br_router_2_0
[2016-08-01 21:46:33] <info>  sudo ovs-vsctl del-br br_router_1_0
[2016-08-01 21:46:33] <info>  sudo ovs-vsctl del-br br_08630628
[2016-08-01 21:46:33] <info>  sudo ovs-vsctl del-br br_b53d792c
[2016-08-01 21:46:33] <info>  sudo ovs-vsctl del-br br_cf1f51ff
[2016-08-01 21:46:33] <info>  sudo ovs-vsctl del-br br_47e364fd
[2016-08-01 21:46:33] <info>  删除ovs网桥完成!
